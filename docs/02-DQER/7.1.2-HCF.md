# Módulo de Histórico Clínico Fotográfico
- **Sigla:** HCF
- **Status:** Em definição
- **Implementação:**
  - ⬜ Backend
  - ⬜ Frontend
  - ⬜ Mobile
  - ⬜ Backoffice

> **Legenda:** ⬜ Pendente | ✅ Realizado | ⚠️ Ponto de atenção | ❌ Não se aplica

## Descrição
O módulo de Histórico Clínico Fotográfico (HCF) é responsável por gerenciar todo o ciclo de vida das imagens clínicas dos pacientes. Ele abrange desde a captura padronizada de fotos, passando pela organização, comparação visual (antes e depois), até o armazenamento seguro e a rastreabilidade, garantindo conformidade com a LGPD e as necessidades dos profissionais de estética.

## Funcionalidades
- **Captura de Fotos:** Registro de imagens com guias e molduras para padronização.
- **Modo Fantasma:** Sobreposição de imagens para alinhamento preciso em capturas sequenciais.
- **Galeria do Paciente:** Organização cronológica das fotos por paciente e procedimento.
- **Criação de Colagens:** Ferramenta para montar comparativos visuais de antes e depois.
- **Sincronização:** Envio automático das imagens para a nuvem para acesso em múltiplos dispositivos.

## Requisitos Funcionais

- **RF-HCF-001:** Capturar foto de paciente
  - **Descrição:** O sistema deve permitir que o profissional capture fotos do paciente usando a câmera do dispositivo, associando a imagem a um paciente e a um procedimento específico.
  - **Critério de aceitação:** A foto deve ser salva no banco de dados com metadados (data, hora, profissional, paciente).
  - **Prioridade:** Alta

- **RF-HCF-002:** Aplicar modo fantasma na captura
  - **Descrição:** O sistema deve oferecer um modo "fantasma" que sobrepõe uma foto anterior com transparência para guiar o enquadramento de uma nova foto.
  - **Critério de aceitação:** A opacidade da imagem fantasma deve ser ajustável pelo usuário.
  - **Prioridade:** Alta

- **RF-HCF-003:** Criar colagem de fotos "antes e depois"
  - **Descrição:** O sistema deve permitir a seleção de duas ou mais fotos da galeria do paciente para criar uma colagem comparativa.
  - **Critério de aceitação:** A colagem gerada deve poder ser salva como uma nova imagem na galeria do paciente ou exportada.
  - **Prioridade:** Média

- **RF-HCF-004:** Visualizar galeria de fotos do paciente
  - **Descrição:** O sistema deve apresentar todas as fotos de um paciente em uma galeria organizada cronologicamente.
  - **Critério de aceitação:** A galeria deve permitir filtros por parte do corpo ou tipo de procedimento.
  - **Prioridade:** Alta

## Requisitos Não Funcionais

- **RNF-HCF-001:** Segurança no Armazenamento de Imagens
  - **Descrição:** Todas as fotos dos pacientes devem ser armazenadas de forma segura, com criptografia em repouso e em trânsito.
  - **Critério de aceitação:** As imagens devem ser acessíveis apenas por profissionais autorizados e vinculados à clínica.
  - **Prioridade:** Alta

- **RNF-HCF-002:** Performance no Carregamento e Sincronização
  - **Descrição:** O carregamento da galeria e a sincronização de novas fotos devem ser performáticos, mesmo em conexões de internet mais lentas.
  - **Critério de aceitação:** A sincronização deve ocorrer em segundo plano, sem bloquear o uso do aplicativo. Imagens devem ser otimizadas para a web/mobile.
  - **Prioridade:** Alta

## Regras de Negócio

- **RN-HCF-001:** Associação Obrigatória a Paciente
  - **Descrição:** Nenhuma foto pode ser capturada ou armazenada no sistema sem estar associada a um cadastro de paciente ativo.
  - **Prioridade:** Alta

- **RN-HCF-002:** Imutabilidade das Fotos
  - **Descrição:** As imagens originais salvas não podem ser editadas ou alteradas. Apenas metadados (como tags e anotações) podem ser adicionados.
  - **Prioridade:** Alta

- **RN-HCF-003:** Consentimento de Uso de Imagem
  - **Descrição:** O sistema deve registrar o consentimento do paciente para a captura e uso de suas imagens, em conformidade com a LGPD.
  - **Prioridade:** Alta

## Dependências

- **Módulo de Cadastro de Paciente (CGP):** Para associar as fotos aos pacientes corretos.
- **Módulo de Segurança:** Para garantir o controle de acesso às imagens.
- **Módulo de Auditoria:** Para registrar quem capturou, visualizou ou exportou cada imagem.

## Riscos Relacionados a Requisitos

- **Vazamento de dados sensíveis:** Risco de exposição de fotos de pacientes caso as políticas de segurança não sejam rigorosamente aplicadas.
- **Perda de dados:** Risco de perda de imagens se a sincronização com a nuvem falhar e o dispositivo local tiver problemas.