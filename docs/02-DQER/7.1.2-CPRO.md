# Módulo: Gestão de Prontuários
- **Sigla:** CPRO
- **Status:** ⬜ Em definição

- **Implementação:**
  - ✅ Backend
  - ⬜ Frontend
  - ✅ Mobile
  - ⬜ Backoffice

> **Legenda:** ⬜ Pendente | ✅ Realizado | ⚠️ Ponto de atenção | ❌ Não se aplica

## Descrição
Este módulo centraliza todas as informações clínicas não-fotográficas dos pacientes. Ele permite que os profissionais de saúde registrem, consultem e gerenciem o histórico clínico, como notas de anamnese, evolução de tratamentos, prescrições e observações gerais, de forma segura e organizada.

## Escopo Inicial
- Criação de notas de texto associadas a uma consulta ou sessão de um paciente.
- Visualização do histórico de prontuários em ordem cronológica.
- Edição de notas existentes (com registro de auditoria).

## Funcionalidades
- **Criar Nova Anotação:** Permite ao profissional adicionar uma nova entrada de texto ao prontuário do paciente.
- **Listar Histórico:** Exibe todas as anotações do prontuário de um paciente em ordem cronológica decrescente.
- **Detalhar Anotação:** Permite visualizar o conteúdo completo de uma anotação específica.
- **Editar Anotação:** Permite a correção ou adição de informações a uma anotação existente.

## Requisitos Funcionais

- **RF-CPRO-001:** Registro de Anotação no Prontuário
  - **Descrição:** O sistema deve permitir que um profissional autorizado crie uma nova anotação no prontuário de um paciente, com um campo de texto livre (rich text).
  - **Critério de aceitação:** A anotação é salva com sucesso, associada ao paciente, ao profissional e com data/hora.
  - **Prioridade:** Alta

- **RF-CPRO-002:** Visualização do Histórico de Prontuário
  - **Descrição:** O sistema deve exibir uma lista cronológica de todas as anotações do prontuário de um paciente.
  - **Critério de aceitação:** A lista é carregada em ordem, mostrando um resumo de cada anotação (data, profissional, início do texto).
  - **Prioridade:** Alta

- **RF-CPRO-003:** Edição de Anotação com Auditoria
  - **Descrição:** O sistema deve permitir a edição de uma anotação, mas deve manter um histórico de versões ou registrar a alteração no módulo de auditoria.
  - **Critério de aceitação:** A versão anterior da nota é preservada ou a alteração é registrada, incluindo quem a fez e quando.
  - **Prioridade:** Média

## Requisitos Não Funcionais

- **RNF-CPRO-001:** Segurança de Dados de Saúde
  - **Descrição:** Todas as informações do prontuário são consideradas dados de saúde sensíveis e devem ser armazenadas com criptografia e controle de acesso rigoroso.
  - **Critério de aceitação:** Os dados são criptografados em repouso e em trânsito. Apenas profissionais autorizados podem acessar os prontuários.
  - **Prioridade:** Altíssima

- **RNF-CPRO-002:** Disponibilidade
  - **Descrição:** O histórico do paciente deve estar sempre disponível para consulta durante um atendimento.
  - **Critério de aceitação:** O sistema deve ter uma disponibilidade de 99.9% para a consulta de prontuários.
  - **Prioridade:** Alta

## Regras de Negócio

- **RN-CPRO-001:** Anotações não podem ser excluídas, apenas marcadas como "inseridas por engano" por um usuário com permissão.
- **RN-CPRO-002:** Toda anotação deve ser assinada digitalmente pelo profissional que a criou (através do login).

## Critérios de Aceitação

- Novas anotações são salvas e exibidas instantaneamente no histórico.
- O histórico de um paciente carrega de forma rápida e completa.
- A edição de uma nota mantém a rastreabilidade da informação original.

## Dependências

- **Módulo de Cadastro de Paciente (CPAC):** Para associar a anotação a um paciente.
- **Módulo de Segurança (DSC-CA):** Para garantir que apenas usuários autorizados possam ler e escrever no prontuário.
- **Módulo de Auditoria (DSC-AU):** Para registrar todas as interações com o prontuário.

## Integrações

- Integração com o sistema de login para identificar o profissional responsável pela anotação.

## Riscos

- Risco de acesso indevido a informações de saúde sensíveis.
- Risco de perda de dados clínicos por falha no salvamento ou na base de dados.

## Ações Críticas do Sistema

- Criação e edição de registros de prontuário.

## Indicadores Possíveis

- Número médio de anotações por consulta/sessão.
- Tempo médio para carregar o histórico completo de um paciente.
