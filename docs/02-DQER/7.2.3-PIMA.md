# Módulo: Processamento de Imagens
- **Sigla:** PIMA
- **Status:** ⬜ Em definição

- **Implementação:**
  - ✅ Backend
  - ❌ Frontend
  - ✅ Mobile
  - ❌ Backoffice

> **Legenda:** ⬜ Pendente | ✅ Realizado | ⚠️ Ponto de atenção | ❌ Não se aplica

## Descrição
Este módulo oferece ferramentas para que os profissionais possam criar composições visuais com as fotos dos pacientes. A principal funcionalidade é a criação de colagens "antes e depois", permitindo comparações claras e eficazes para demonstrar a evolução dos tratamentos.

## Escopo Inicial
- Seleção de duas ou mais imagens da galeria do paciente.
- Criação de uma colagem lado a lado (antes e depois).
- Salvamento da colagem gerada no histórico do paciente.

## Funcionalidades
- **Seleção de Imagens para Colagem:** Interface para escolher as imagens que farão parte da composição.
- **Geração de Colagem:** Processa as imagens selecionadas e as une em um único arquivo de imagem (colagem).
- **Templates de Colagem:** Oferece layouts pré-definidos (ex: 2 fotos lado a lado, 4 fotos em grade).
- **Salvar Colagem:** Salva a imagem resultante na galeria do paciente, marcando-a como uma colagem.

## Requisitos Funcionais

- **RF-PIMA-001:** Seleção de Imagens
  - **Descrição:** O usuário deve poder selecionar múltiplas imagens do Histórico Clínico Fotográfico para criar uma colagem.
  - **Critério de aceitação:** A interface permite a seleção de pelo menos duas imagens.
  - **Prioridade:** Alta

- **RF-PIMA-002:** Criação de Colagem "Antes e Depois"
  - **Descrição:** O sistema deve permitir a criação de uma colagem com duas imagens, uma ao lado da outra, com legendas opcionais "Antes" e "Depois".
  - **Critério de aceitação:** A colagem é gerada corretamente com as duas imagens selecionadas.
  - **Prioridade:** Altíssima

- **RF-PIMA-003:** Salvamento da Colagem
  - **Descrição:** A colagem gerada deve ser salva no histórico do paciente como um novo item.
  - **Critério de aceitação:** A colagem aparece na galeria do paciente e pode ser visualizada como qualquer outra foto.
  - **Prioridade:** Alta

## Requisitos Não Funcionais

- **RNF-PIMA-001:** Performance de Geração
  - **Descrição:** A geração de uma colagem a partir de imagens de alta resolução deve ser concluída em um tempo razoável.
  - **Critério de aceitação:** Uma colagem de duas fotos é gerada em menos de 5 segundos.
  - **Prioridade:** Média

- **RNF-PIMA-002:** Qualidade da Imagem Final
  - **Descrição:** A colagem resultante deve manter uma alta qualidade de imagem, sem perdas visíveis de resolução.
  - **Critério de aceitação:** A resolução da colagem é suficiente para visualização em detalhes em telas de alta definição.
  - **Prioridade:** Alta

## Dependências

- **Histórico Clínico Fotográfico (HCF):** Para selecionar as imagens que serão processadas e para salvar a colagem resultante.
- **Armazenamento (STOR):** Para salvar o arquivo da colagem gerada.
